<html>
  <head>
      <!-- Render object array as "ul" -->
    <script>
      class MyComponent extends HTMLElement {
        connectedCallback() {
          this.render();
        }
        
        static get observedAttributes() {
          return ['todos'];
        }
        
        attributeChangedCallback(name, oldValue, newValue) {
          this.render();
        }

        render() {
          const todosArr = JSON.parse(this.attributes.todos.value || '[]');
          console.log(todosArr);
          const todoEls = todosArr
            .map(todo => `
                <li>
                  <input type="checkbox" ${todo.completed ? 'checked' : ''}/>
                  ${todo.name}
                </li>
            `)
            .join('\n');
          this.innerHTML = `<ul>${todoEls}</ul>`;
        }
        
      }
    
      customElements.define('my-component', MyComponent);
    </script>
    
    
    <!-- Form event handler -->
    <script>
      var todoList = [];
      
      window.onload = function() {
        const formEl = document.querySelector('#todoForm');
        const inputEl = document.querySelector('#todoName');
        formEl.addEventListener('submit', e => {
          e.preventDefault();          
          todoList.push({name: inputEl.value, completed: false});
          inputEl.value = '';
          changeElement();
        })
      }
      
      function toggleAll() {
        todoList = todoList.map(todo => ({...todo, completed: !todo.completed}));
        changeElement();
      }
    </script>
    
    <!-- Update custom element attributes -->   
    <script>    
      function changeElement() {
        const compEl = document.querySelector('#mycomp');
        compEl.attributes.todos.value = JSON.stringify(todoList);      
      }
    </script>
    
  </head>
  <body>
    <button onclick="toggleAll()">Toggle all</button>
    <form id="todoForm">
      <input id="todoName" type="text"/>
      <button>Add</button>
    </form>
    <my-component id="mycomp" todos="[]"></my-component>
  </body>
</html>