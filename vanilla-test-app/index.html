<!--
    https://coderpad.io/blog/intro-to-web-components-vanilla-js/
-->
<html>
  <head>
    
    <!-- Custom element -->
    
    <script>
      class MyComponent extends HTMLElement {
        connectedCallback() {
          console.log("I am connecting");
          this.innerHTML = `<h1>Hello world</h1>`;
        }
        
        disconnectedCallback() {
          console.log("I am leaving");
        }
      }
    
      customElements.define('my-component', MyComponent);
    </script>
    
    <!-- Show/hide logic -->
    
    <script>
      var isShown = false;
      
      window.onload = (event) => {
        changeElement();
      };
      
      function changeElement() {
        isShown = !isShown;
        const containEl = document.querySelector('#container');
        if (isShown) {
          // Append
          const newComp = document.createElement('my-component');
          containEl.append(newComp);
        } else {
          // Remove all children
          for (const child of containEl.children) {
            child.remove();
          }
        }
      }  
    </script>
    
  </head>
  
  <!-- HTML -->
  
  <body>
    <button onclick="changeElement()">Toggle</button>
    <div id="container"></div>
  </body>
</html>